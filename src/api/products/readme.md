# Преобразование данных продуктов: от "бэкенда" к "фронтенду"
Этот файл представляет собой описание преобразования данных о продуктах с бэкенда в формат, удобный для использования на фронтенде. Здесь мы используем TypeScript для строгой типизации данных и описания ключей объектов.

#### Описание файлов
1. const.ts: В этом файле определены константы, такие как URL эндпоинта для получения данных с бэкенда и ключи для свойств продуктов как на фронтенде, так и на бэкенде.
2. type.ts: В этом файле определены интерфейсы для типизации объектов продуктов как на фронтенде (IProduct), так и на бэкенде (IBackendProduct). Также здесь определен интерфейс KeyValueMappings, используемый для связи ключей на фронтенде и на бэкенде.
3. helpers.ts: Этот файл содержит функцию fromBackToFront, которая преобразует массив объектов продуктов из формата бэкенда в формат фронтенда, используя заданные маппинги ключей.
4. mok_products.json: Пример файла с данными о продуктах на бэкенде.
5. products_api.ts: Основной файл, в котором реализована логика получения данных с бэкенда и их преобразование в формат для использования на фронтенде.


#### Логика работы
- В файле const.ts определены ключи и URL для работы с продуктами.
- Файл type.ts содержит типы данных продуктов как на фронтенде, так и на бэкенде, а также интерфейс KeyValueMappings для связи между ними.
- В helpers.ts реализована функция fromBackToFront, которая берет массив объектов продуктов из формата бэкенда и преобразует его в формат фронтенда, используя маппинги ключей, определенные в const.ts.
- В products_api.ts реализована функция getProducts, которая получает данные о продуктах с бэкенда, используя Axios, преобразует их в формат фронтенда с помощью fromBackToFront и возвращает полученный массив объектов.


#### Использование
Все основные изменения происходят в файле const.ts


Замените эндпоинты бекенда для получения списка продуктов
PRODUCTS_URL - полная ссылка эндпоинта, она передается в axios для получения данных
```
const BASE_URL = "http://localhost:5555/";
export const PRODUCTS_URL = BASE_URL + "src/api/products/mok_products.json";
```

Замените или добавьте нужные ключи, которые вы используете в своем проете
```
export const FRONT__TITLE = "title";
export const FRONT__CATEGORY = "category";
export const FRONT__PRICE = "price";
```
Замените или добавьте нужные ключи, которые вы получаете с бека
```
export const BACK__TITLE = "product_title";
export const BACK__CATEGORY = "product_category";
export const BACK__PRICE = "product_price";
```

Замените или добавьте соответствия ключей, которые вы используете, с ключами, которые с бека
```
export const keyValueMappings: KeyValueMappings = {
    [FRONT__TITLE]: [BACK__TITLE],
    [FRONT__CATEGORY]: [BACK__CATEGORY],
    [FRONT__PRICE]: [BACK__PRICE]
}
```

Вызовите функцию getProducts из любого файла вашего проекта, чтобы получить массив объектов продуктов в формате фронтенда.

#### Траблшутинг
---
**Проблема**: Не верный эндпоинт, лег сервер бека, проблемы с даными
**Решение**: Код устроен так, что при возникновении таких проблем, функция getProducts вернёт пустой массив
---
**Проблема**: Бек поменял название ключа
**Решение**: Если код не может найти ключ, то он возвращает пустую строку. Таким образом выполнение кода не падает с ошибкой. Для решения такой проблемы поменяйте название ключа на новый в const.ts
```
// old
export const BACK__TITLE = "product_title";
```
```
// new
export const BACK__TITLE = "product_title_new_name";
```
---
**Проблема**: Появились новые данные, которые нужно использовать на фронте
**Решение**: В файле const.ts добавляем нужные ключи для фронта и бека соответственно. Для фронта название которое вы будете использовать, а для бека, которое использует он
```
...
export const FRONT__NEW_KEY = "new_key_front";
```
```
...
export const BACK__NEW_KEY = "new_key_back";
```
далее неообходимо добавить соответствие ключей
```
export const keyValueMappings: KeyValueMappings = {
    ...
    [FRONT__NEW_KEY]: [BACK__NEW_KEY]
}
```
На этом все. В результате выполнения функции getProducts вы получите свойство "new_key_front" со значение которое лежало на беке в свойстве "new_key_back".

#### Итоги
Благодаря автоматизации всего процесса, нам не нужно каждый раз лезть в код и менять его. Нам достаточно в одном файле (const.ts) заменить или добавить нужные нам свойства. При этом нам абсолютно не важно, как бек называет свои данные, ведь мы используем те названия, которые удобны нам. В случае использования полученных данных во многих местах нашего приложения, нам не надо залазить в каждый файл. Если использовать ключи, как на примере ниже, то нам так же нужно будет изменить названия только в файле const.ts
```
...
<div>Название: {data[FRONT__TITLE]}</div>
<div>Категория: {data[FRONT__CATEGORY]}</div>
<div>Цена: {data[FRONT__PRICE]} р.</div>
...
```
